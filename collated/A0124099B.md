# A0124099B
###### backend\AddParser.java
``` java
 */

package backend;

import backend.NameParser;
import backend.DateParser;
import backend.TimeParser;

import java.util.ArrayList;

import struct.Command;
import struct.Date;

public class AddParser {
	
	private static final int POSITION_PLUS_ONE = 1;
	private static final int POSITION_PLUS_TWO = 2;
	private static final int POSITION_DIFFERENCE_TWO = 2;
	private static final int POSITION_DIFFERENCE_THREE = 3;
	private static final int POSITION_DIFFERENCE_FOUR = 4;
	
	private static final int SAME_DATE = 0;
	private static final int THIS_DATE_LATER_THAN_OTHER_DATE = 1;
	
	private static final int OFFSET = 1;
	
	private static final String KEYWORD_DEADLINE = "by";
	private static final String KEYWORD_EVENT_TO = "to";
	private static final String KEYWORD_EVENT_FROM = "from";
	private static final String KEYWORD_EVENT_ON = "on";
	
	private static final String MESSAGE_ERROR_TASK_NAME = "Task name required.";
	private static final String MESSAGE_ERROR_DEADLINE = "Invalid deadline.";
	private static final String MESSAGE_ERROR_EVENT_FORMAT = "Invalid format for adding event.";
	private static final String MESSAGE_ERROR_START_DATE = "Invalid start date.";
	private static final String MESSAGE_ERROR_START_TIME = "Invalid start time.";
	private static final String MESSAGE_ERROR_END_DATE = "Invalid end date.";
	private static final String MESSAGE_ERROR_END_TIME = "Invalid end time.";
	private static final String MESSAGE_ERROR_START_END_TIME = "Start time later than or equal to "
			                                          + "end time for single-day event.";
	private static final String MESSAGE_ERROR_START_END_DATE = "Start date later than end date.";
	private static final String MESSAGE_ERROR_EVENT_NAME = "Event name required.";
	
	private static final DateParser dateParser = new DateParser();
	private static final TimeParser timeParser = new TimeParser();
	private static final NameParser nameParser = new NameParser();
	
	/**
	 * This method parses add commands depending on the keywords that
	 * the input arguments have.
	 * 
	 * @param arguments
	 * @return command
	 */
	protected Command parse(ArrayList<String> arguments) {
		ArrayList<String> argumentsLowerCase = CommandParser.toLowerCase(arguments);
		
		if (arguments.isEmpty()) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_TASK_NAME);
		} else if (argumentsLowerCase.contains(KEYWORD_DEADLINE)) {
			int keywordByIndex = argumentsLowerCase.indexOf(KEYWORD_DEADLINE);
			return addTask(arguments, keywordByIndex);
		} else if (containsToAndFrom(argumentsLowerCase)) {
			return parseEvent(arguments, argumentsLowerCase);
		} else {
			return addFloatingTask(arguments);
		}
	}
	
	private boolean containsToAndFrom(ArrayList<String> argumentsLowerCase) {
		return argumentsLowerCase.contains(KEYWORD_EVENT_TO) 
			   && argumentsLowerCase.contains(KEYWORD_EVENT_FROM);
	}

	private Command parseEvent(ArrayList<String> arguments, ArrayList<String> argumentsLowerCase) {
		int keywordFromIndex = argumentsLowerCase.indexOf(KEYWORD_EVENT_FROM);
		int keywordToIndex = argumentsLowerCase.indexOf(KEYWORD_EVENT_TO);
		
		// We will call addDayEvent method or addEvent method depending on whether
		// KEYWORD_EVENT_ON is in the user input
		if (argumentsLowerCase.contains(KEYWORD_EVENT_ON)) {
			int keywordOnIndex = argumentsLowerCase.indexOf(KEYWORD_EVENT_ON);
			return addDayEvent(arguments, keywordOnIndex, keywordFromIndex, keywordToIndex);
		} else {
			return addEvent(arguments, keywordFromIndex, keywordToIndex);
		}
	}

	private Command addTask(ArrayList<String> arguments, int keywordByIndex) {
		Date date = null;
		String name = nameParser.getName(arguments, CommandParser.POSITION_FIRST_INDEX, keywordByIndex);
		if (arguments.size() - keywordByIndex == POSITION_DIFFERENCE_TWO) {
			date = dateParser.getDate(arguments.get(arguments.size() - OFFSET).toLowerCase());
		}
		
		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the attribute checks in verification method
		String verificationMsg = verifyTaskAttributes(date, name);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}
		
		Command command = new Command(Command.CommandType.ADD);
		command.setDataType(Command.DataType.TASK);
		command.setName(name);
		command.setDueDate(date);
		return command;
	}

	private String verifyTaskAttributes(Date date, String name) {
		if (date == null) {
			return MESSAGE_ERROR_DEADLINE;
		}
		if (name == null) {
			return MESSAGE_ERROR_TASK_NAME;
		}
		return CommandParser.STRING_VERIFIED;
	}

	private Command addEvent(ArrayList<String> arguments, int keywordFromIndex, int keywordToIndex) {
		// To account for non-strict ordering of keywords To and From
		if (!isEventInCorrectPosition(arguments, keywordFromIndex, keywordToIndex)) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_EVENT_FORMAT);
		}

		// date must be first string after from and to, time must be second string after from and to
		Date startDate = dateParser.getDate(arguments.get(
				         keywordFromIndex + POSITION_PLUS_ONE).toLowerCase());
		String startTime = timeParser.getTime(arguments.get(keywordFromIndex + POSITION_PLUS_TWO));
		Date endDate = dateParser.getDate(arguments.get(
				       keywordToIndex + POSITION_PLUS_ONE).toLowerCase());
		String endTime = timeParser.getTime(arguments.get(keywordToIndex + POSITION_PLUS_TWO));
		String name = nameParser.getEventName(arguments, keywordToIndex, keywordFromIndex);

		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the attribute checks in verification method
		String verificationMsg = verifyEvent(startDate, startTime, endDate, endTime, name);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}

		Command command = new Command(Command.CommandType.ADD);
		command.setDataType(Command.DataType.EVENT);
		command.setName(name);
		command.setStartDate(startDate);
		command.setStartTime(startTime);
		command.setEndDate(endDate);
		command.setEndTime(endTime);
		return command;
	}

	private boolean isEventInCorrectPosition(ArrayList<String> arguments, int keywordFromIndex, 
			                                 int keywordToIndex) {
		return Math.abs(keywordToIndex - keywordFromIndex) == POSITION_DIFFERENCE_THREE
				        && (arguments.size() - keywordToIndex == POSITION_DIFFERENCE_THREE
						|| arguments.size() - keywordFromIndex == POSITION_DIFFERENCE_THREE);
	}
	
	private String verifyEvent(Date startDate, String startTime, Date endDate, String endTime, String name) {
		if (startDate == null) {
			return MESSAGE_ERROR_START_DATE;
		}
		if (startTime == null) {
			return MESSAGE_ERROR_START_TIME;
		}
		if (endDate == null) {
			return MESSAGE_ERROR_END_DATE;
		}
		if (endTime == null) {
			return MESSAGE_ERROR_END_TIME;
		}
		if (startDate.compareTo(endDate) == SAME_DATE) {
			if (!timeParser.areValidTimes(startTime, endTime)) {
				return MESSAGE_ERROR_START_END_TIME;
			}
		}
		if (startDate.compareTo(endDate) == THIS_DATE_LATER_THAN_OTHER_DATE) {
			return MESSAGE_ERROR_START_END_DATE;
		}
		if (name == null) {
			return MESSAGE_ERROR_EVENT_NAME;
		}
		return CommandParser.STRING_VERIFIED;
	}

	private Command addDayEvent(ArrayList<String> arguments, int keywordOnIndex, int keywordFromIndex,
			                    int keywordToIndex) {
		// To account for non-strict ordering of keywords on, from and to
		int minIndex = Math.min(keywordToIndex, Math.min(keywordFromIndex, keywordOnIndex));
		int maxIndex = Math.max(keywordToIndex, Math.max(keywordFromIndex, keywordOnIndex));
		if (isDayEventInCorrectPosition(arguments, minIndex, maxIndex)) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_EVENT_FORMAT);
		}

		// date must be first string after on, start time must be first string after from,
		// end time must be first string after to
		Date date = dateParser.getDate(arguments.get(keywordOnIndex + POSITION_PLUS_ONE).toLowerCase());
		String startTime = timeParser.getTime(arguments.get(keywordFromIndex + POSITION_PLUS_ONE));
		String endTime = timeParser.getTime(arguments.get(keywordToIndex + POSITION_PLUS_ONE));
		String name = nameParser.getName(arguments, CommandParser.POSITION_FIRST_INDEX, minIndex);
		
		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the attribute checks in verification method
		String verificationMsg = verifyEvent(date, startTime, date, endTime, name);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}
		
		Command command = new Command(Command.CommandType.ADD);
		command.setDataType(Command.DataType.EVENT);
		command.setName(name);
		command.setStartDate(date);
		command.setStartTime(startTime);
		command.setEndDate(date);
		command.setEndTime(endTime);
		return command;
	}

	private boolean isDayEventInCorrectPosition(ArrayList<String> arguments, int minIndex, int maxIndex) {
		return maxIndex - minIndex != POSITION_DIFFERENCE_FOUR 
			   || arguments.size() - maxIndex != POSITION_DIFFERENCE_TWO;
	}

	private Command addFloatingTask(ArrayList<String> arguments) {
		Command command = new Command(Command.CommandType.ADD);
		command.setDataType(Command.DataType.FLOATING_TASK);
		String name = nameParser.getName(arguments, CommandParser.POSITION_FIRST_INDEX, arguments.size());
		command.setName(name);
		return command;
	}

}
```
###### backend\CommandParser.java
``` java
 */

package backend;

import backend.AddParser;
import backend.DeleteParser;
import backend.EditParser;
import backend.SetParser;
import backend.NameParser;

import struct.Command;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Hashtable;

public class CommandParser {

	private static final int POSITION_PARAM_COMMAND = 0;
	private static final int POSITION_FIRST_PARAM_ARGUMENT = 1;
	protected static final int POSITION_FIRST_INDEX = 0;

	private static final String REGEX_WHITESPACES = "[\\s;]+";
	protected static final String REGEX_POSITIVE_INTEGER = "^0*[1-9][0-9]*";
	
	protected static final String STRING_VERIFIED = "verified";

	protected static final String USER_COMMAND_ADD = "add";
	protected static final String USER_COMMAND_DELETE = "delete";
	protected static final String USER_COMMAND_EDIT = "edit";
	protected static final String USER_COMMAND_SEARCH = "search";
	protected static final String USER_COMMAND_DONE = "done";
	protected static final String USER_COMMAND_SET = "set";
	protected static final String USER_COMMAND_SAVE = "save";
	protected static final String USER_COMMAND_UNDO = "undo";
	protected static final String USER_COMMAND_REDO = "redo";
	protected static final String USER_COMMAND_VIEW_ALL = "all";
	protected static final String USER_COMMAND_VIEW_DEF = "def";
	protected static final String USER_COMMAND_VIEW_HIST = "hist";
	protected static final String USER_COMMAND_VIEW_UNRES = "unres";
	protected static final String USER_COMMAND_VIEW_HELP = "help";
	protected static final String USER_COMMAND_VIEW_OPEN_FILE = "openfile";
	protected static final String USER_COMMAND_VIEW_CONFIG = "config";
	protected static final String USER_COMMAND_EXIT = "exit";

	private static final String MESSAGE_ERROR_USER_COMMAND = "Invalid user command.";
	private static final String MESSAGE_ERROR_INDEX = "Invalid index.";
	private static final String MESSAGE_ERROR_SAVE = "Directory required.";
	private static final String MESSAGE_ERROR_NO_ARGUMENTS = "This command does not expect arguments.";

	private static final AddParser addParser = new AddParser();
	private static final EditParser editParser = new EditParser();
	private static final SetParser setParser = new SetParser();
	private static final NameParser nameParser = new NameParser();
	
	// Hashtable of aliases as keys and commands as values
	private Hashtable<String, String> commandAliases = new Hashtable<String, String>();

	// ================================================================
	// Constructor
	// ================================================================
	
	public CommandParser(Hashtable<String, String> commandAliases) {
		assert(commandAliases != null);
		this.commandAliases = commandAliases;
	}
	
	// ================================================================
	// Public methods
	// ================================================================

	public Command parse(String userInput) {
		Command command;
		ArrayList<String> originalParameters = splitString(userInput);
		// originalArguments are given to add, edit, search and save commands to preserve
		// the original name, keywords or directory given in userInput
		ArrayList<String> originalArguments = getUserArguments(originalParameters);
		ArrayList<String> parameters = splitString(userInput.toLowerCase());
		// convert parameters to account for aliases
		ArrayList<String> convertedParameters = convertParameters(parameters);
		ArrayList<String> arguments = getUserArguments(convertedParameters);
		String userCommand = getUserCommand(convertedParameters);

		switch (userCommand) {

            case USER_COMMAND_ADD :
                command = initAddCommand(originalArguments);
                break;

            case USER_COMMAND_DELETE :
                command = initDeleteCommand(arguments);
                break;

            case USER_COMMAND_EDIT :
                command = initEditCommand(originalArguments);
                break;
                
            case USER_COMMAND_SEARCH :
            	command = initSearchCommand(originalArguments);
            	break;
            	
            case USER_COMMAND_DONE :
            	command = initDoneCommand(arguments);
            	break;
            	
            case USER_COMMAND_SET :
            	command = initSetCommand(arguments);
            	break;
            	
            case USER_COMMAND_SAVE :
            	command = initSaveCommand(originalArguments);
            	break;
            	
            case USER_COMMAND_UNDO :
            	command = initUndoCommand(arguments);
            	break;
            	
            case USER_COMMAND_REDO :
            	command = initRedoCommand(arguments);
            	break; 
            	
            case USER_COMMAND_VIEW_ALL :
            	command = initViewAllCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_DEF :
            	command = initViewDefCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_HIST :
            	command = initViewHistCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_UNRES :
            	command = initViewUnresCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_HELP :
            	command = initViewHelpCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_OPEN_FILE :
            	command = initViewOpenFileCommand(arguments);
            	break;
            	
            case USER_COMMAND_VIEW_CONFIG :
            	command = initViewConfigCommand(arguments);
            	break;
                
            case USER_COMMAND_EXIT :
                command = initExitCommand(arguments);
                break;

            default :
                command = initInvalidCommand(MESSAGE_ERROR_USER_COMMAND);
        }
		command.setUserInput(userInput);
		return command;
	}
	
	public void deleteAlias(String command) {
		commandAliases.remove(command);
	}
	
	public void setAlias(String newCommand, String originalCommand) {
		commandAliases.put(newCommand, originalCommand);
	}
	
	// ================================================================
	// Private methods
	// ================================================================

	private ArrayList<String> splitString(String arguments) {
		String[] strArray = arguments.trim().split(REGEX_WHITESPACES);
		return new ArrayList<String>(Arrays.asList(strArray));
	}

	/**
	 * This method first attempts to convert the first string if it is a
	 * registered alias. It then checks if this first string is 
	 * USER_COMMAND_SET. If it is, it converts the rest of the userInput
	 * if any of them is also a registered alias. This is to allow for 
	 * initSetCommand() to know which command the user is referring to.
	 * 
	 * @param parameters
	 * @return convertedParameters
	 */
	private ArrayList<String> convertParameters(ArrayList<String> parameters) {
		if (commandAliases.containsKey(parameters.get(POSITION_FIRST_INDEX))) {
			String parameter = parameters.get(POSITION_FIRST_INDEX);
			String newParameter = commandAliases.get(parameter);
			parameters.remove(POSITION_FIRST_INDEX);
			parameters.add(POSITION_FIRST_INDEX, newParameter);
		}
		if (parameters.get(POSITION_FIRST_INDEX).equals(USER_COMMAND_SET)) {
			for (int i = 1; i < parameters.size(); i++) {
				String currParameter = parameters.get(i);
				if (commandAliases.containsKey(currParameter)) {
					String newParameter = commandAliases.get(currParameter);
					parameters.remove(i);
					parameters.add(i, newParameter);
				}
			}
		}
		return parameters;
	}

	private String getUserCommand(ArrayList<String> parameters) {
		return parameters.get(POSITION_PARAM_COMMAND);
	}

	private ArrayList<String> getUserArguments(ArrayList<String> parameters) {
		return new ArrayList<String>(parameters.subList(POSITION_FIRST_PARAM_ARGUMENT, 
				                     parameters.size()));
	}
	
	/**
	 * This method converts all the strings in the ArrayList to lower case
	 * @param arguments
	 * @return arguments with its members all in lower case
	 */
	protected static ArrayList<String> toLowerCase(ArrayList<String> arguments) {
		ArrayList<String> argumentsLowerCase = new ArrayList<String>();
		for (int i = 0; i < arguments.size(); i++) {
			String parameter = arguments.get(i);
			String newParameter = parameter.toLowerCase();
			argumentsLowerCase.add(newParameter);
		}
		return argumentsLowerCase;
	}

	// ================================================================
	// Create add command method
	// ================================================================

	private Command initAddCommand(ArrayList<String> arguments) {
		return addParser.parse(arguments);
	}

	// ================================================================
	// Create delete command methods
	// ================================================================

	private Command initDeleteCommand(ArrayList<String> arguments) {
		// deleteParser is created with every delete command in order
		// to pass in the most updated commandAliases Hashtable
		DeleteParser deleteParser = new DeleteParser(commandAliases);
		return deleteParser.parse(arguments);
	}

	// ================================================================
	// Create edit command method
	// ================================================================

	private Command initEditCommand(ArrayList<String> arguments) {
		return editParser.parse(arguments);
	}

	// ================================================================
	// Create search command method
	// ================================================================

	private Command initSearchCommand(ArrayList<String> arguments) {
		// If userInput is simply "search", the arguments here will be empty
		// and it will be recgonised as a command to switch to search view
		if (arguments.isEmpty()) {
			Command command = new Command(Command.CommandType.VIEW);
			command.setViewType(Command.ViewType.SEARCH);
			return command;
		}
		String searchWords = nameParser.getName(arguments, POSITION_FIRST_INDEX, arguments.size());
		Command command = new Command(Command.CommandType.SEARCH);
		command.setName(searchWords);
		return command;
	}

	// ================================================================
	// Create done command method
	// ================================================================

	private Command initDoneCommand(ArrayList<String> arguments) {
		// If userInput is simply "done", the arguments here will be empty
		// and it will be recgonised as a command to switch to search view
		if (arguments.isEmpty()) {
			Command command = new Command(Command.CommandType.VIEW);
			command.setViewType(Command.ViewType.DONE);
			return command;
		}
		String index = arguments.get(POSITION_FIRST_INDEX);

		if (arguments.size() > 1 || !index.matches(REGEX_POSITIVE_INTEGER)) {
			return initInvalidCommand(MESSAGE_ERROR_INDEX);
		}

		Command command = new Command(Command.CommandType.DONE);
		command.setIndex(Integer.parseInt(index));
		return command;
	}

	// ================================================================
	// Create set command methods
	// ================================================================

	private Command initSetCommand(ArrayList<String> arguments) {
		return setParser.parse(arguments);
	}

	// ================================================================
	// Create save command method
	// ================================================================

	private Command initSaveCommand(ArrayList<String> arguments) {
		if (arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_SAVE);
		}
		Command command = new Command(Command.CommandType.SAVE);
		String directory = nameParser.getName(arguments, POSITION_FIRST_INDEX, arguments.size());
		command.setName(directory);
		return command;
	}

	// ================================================================
	// Create undo command method
	// ================================================================

	private Command initUndoCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.UNDO);
		return command;
	}

	// ================================================================
	// Create redo command method
	// ================================================================

	private Command initRedoCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.REDO);
		return command;
	}

	// ================================================================
	// Create view all command method
	// ================================================================

	private Command initViewAllCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.ALL);
		return command;
	}

	// ================================================================
	// Create view def command method
	// ================================================================

	private Command initViewDefCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.DEF);
		return command;
	}

	// ================================================================
	// Create view hist command method
	// ================================================================

	private Command initViewHistCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.HIST);
		return command;
	}

	// ================================================================
	// Create view unres command method
	// ================================================================

	private Command initViewUnresCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.UNRES);
		return command;
	}

	// ================================================================
	// Create view help command method
	// ================================================================

	private Command initViewHelpCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.HELP);
		return command;
	}

	// ================================================================
	// Create view open file command method
	// ================================================================

	private Command initViewOpenFileCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.OPENFILE);
		return command;
	}

	// ================================================================
	// Create view config command method
	// ================================================================

	private Command initViewConfigCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		Command command = new Command(Command.CommandType.VIEW);
		command.setViewType(Command.ViewType.CONFIG);
		return command;
	}

	// ================================================================
	// Create exit command method
	// ================================================================

	private Command initExitCommand(ArrayList<String> arguments) {
		if (!arguments.isEmpty()) {
			return initInvalidCommand(MESSAGE_ERROR_NO_ARGUMENTS);
		}
		return new Command(Command.CommandType.EXIT);
	}

	// ================================================================
	// Create invalid command method
	// ================================================================

	protected static Command initInvalidCommand(String errorMsg) {
		Command command = new Command(Command.CommandType.INVALID);
		command.setName(errorMsg);
		return command;
	}

}
```
###### backend\DateParser.java
``` java
 */

package backend;

import java.util.ArrayList;

import struct.Date;

public class DateParser {

	private static final int POSITION_SECOND_INDEX = 1;
	private static final int POSITION_THIRD_INDEX = 2;
	private static final int POSITION_FOURTH_INDEX = 3;
	private static final int POSITION_FIFTH_INDEX = 4;
	
	private static final int SAME_DATE = 0;
	
	private static final int DIFFERENCE_ZERO = 0;

	private static final int SMALL_DATE_LENGTH = 4;

	private static final int NUMBER_OF_DAYS_IN_A_WEEK = 7;

	private static final String KEYWORD_NEXT = "n";
	private static final String KEYWORD_TODAY = "today";
	private static final ArrayList<String> KEYWORD_TOMORROWS = new ArrayList<String>();

	private static final ArrayList<String> DAYS_ARRAY_LIST = new ArrayList<String>();
	private static final ArrayList<String> DAYS_FULL_ARRAY_LIST = new ArrayList<String>();

	public DateParser() {
		initTmrArrayList();
		initDaysArrayList();
		initFullDaysArrayList();
	}

	protected Date getDate(String date) {
		Date todayDate = Date.todayDate();
		if (date.equals(KEYWORD_TODAY)) {
			return todayDate;
		} else if (KEYWORD_TOMORROWS.contains(date)) {
			return Date.tomorrowDate();
		} else if (DAYS_FULL_ARRAY_LIST.contains(date)) {
			return getDateForDay(date, todayDate);
		} else if (date.matches(CommandParser.REGEX_POSITIVE_INTEGER)) {
			return getDateForDdmm(date, todayDate);
		} else {
			return null;
		}
	}

	private Date getDateForDdmm(String date, Date todayDate) {
		if (String.valueOf(date).length() == SMALL_DATE_LENGTH) {
			String year = todayDate.formatDateShort().substring(POSITION_FIFTH_INDEX);
			date = date + year;
		}
		Date currDate = new Date(date);
		if (isValidDate(date) && todayDate.compareTo(currDate) <= SAME_DATE) {
			return currDate;
		} else {
			return null;
		}
	}

	private Date getDateForDay(String date, Date todayDate) {
		boolean hasN = false;
		
		// If the first character is KEYWORD_NEXT, we set hasN to true
		// and remove the first chracter
		if (date.substring(CommandParser.POSITION_FIRST_INDEX, POSITION_SECOND_INDEX).equals(KEYWORD_NEXT)) {
			hasN = true;
			date = date.substring(POSITION_SECOND_INDEX);
		}
		
		String daySubstring = date.substring(CommandParser.POSITION_FIRST_INDEX, POSITION_FOURTH_INDEX);
		String todayString = todayDate.getDayString().toLowerCase();
		String todaySubstring = todayString.substring(CommandParser.POSITION_FIRST_INDEX, 
				                                      POSITION_FOURTH_INDEX);
		int day = DAYS_ARRAY_LIST.indexOf(daySubstring);
		int today = DAYS_ARRAY_LIST.indexOf(todaySubstring);
		int difference = day - today;
		
		// If difference is negative, we add NUMBER_OF_DAYS_IN_A_WEEK
		// to the difference to know the number of days we need to add
		// to today
		if (difference < DIFFERENCE_ZERO) {
			difference += NUMBER_OF_DAYS_IN_A_WEEK;
		}
		
		// If hasN has been set to true, we will need to add another
		// NUMBER_OF_DAYS_IN_A_WEEK to get the actual difference
		// in days from today
		if (hasN) {
			difference += NUMBER_OF_DAYS_IN_A_WEEK;
		}
		
		return todayDate.plusDay(difference);
	}

	private boolean isValidDate(String date) {
		// To account for the offset in index referencing, index 0 is initialiased to 0,
		// while the rest of the indexes are initialised to the number of days in that
		// index's month
		int[] daysInEachMonth = { 0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
		int day = Integer.parseInt(date.substring(CommandParser.POSITION_FIRST_INDEX, POSITION_THIRD_INDEX));
		int month = Integer.parseInt(date.substring(POSITION_THIRD_INDEX, POSITION_FIFTH_INDEX));
		int year = 2000 + Integer.parseInt(date.substring(POSITION_FIFTH_INDEX));
		
		// Adjust number of days in February if the year is a leap year
		adjustForLeapYear(daysInEachMonth, year);
		if (month < 13 && day <= daysInEachMonth[month]) {
			return true;
		} else {
			return false;
		}
	}

	private void adjustForLeapYear(int[] daysInEachMonth, int year) {
		if (year % 4 == 0) {
			if (year % 100 != 0) {
				daysInEachMonth[2] = 29;
			} else {
				if (year % 400 == 0) {
					daysInEachMonth[2] = 29;
				}
			}
		}
	}
	
	private void initTmrArrayList() {
		KEYWORD_TOMORROWS.add("tomorrow");
		KEYWORD_TOMORROWS.add("tmr");
		KEYWORD_TOMORROWS.add("tomo");
	}

	private void initDaysArrayList() {
		DAYS_ARRAY_LIST.add("mon");
		DAYS_ARRAY_LIST.add("tue");
		DAYS_ARRAY_LIST.add("wed");
		DAYS_ARRAY_LIST.add("thu");
		DAYS_ARRAY_LIST.add("fri");
		DAYS_ARRAY_LIST.add("sat");
		DAYS_ARRAY_LIST.add("sun");
	}

	private void initFullDaysArrayList() {
		DAYS_FULL_ARRAY_LIST.add("mon");
		DAYS_FULL_ARRAY_LIST.add("tue");
		DAYS_FULL_ARRAY_LIST.add("wed");
		DAYS_FULL_ARRAY_LIST.add("thu");
		DAYS_FULL_ARRAY_LIST.add("fri");
		DAYS_FULL_ARRAY_LIST.add("sat");
		DAYS_FULL_ARRAY_LIST.add("sun");
		DAYS_FULL_ARRAY_LIST.add("monday");
		DAYS_FULL_ARRAY_LIST.add("tuesday");
		DAYS_FULL_ARRAY_LIST.add("wednesday");
		DAYS_FULL_ARRAY_LIST.add("thursday");
		DAYS_FULL_ARRAY_LIST.add("friday");
		DAYS_FULL_ARRAY_LIST.add("saturday");
		DAYS_FULL_ARRAY_LIST.add("sunday");
		DAYS_FULL_ARRAY_LIST.add("nmon");
		DAYS_FULL_ARRAY_LIST.add("ntue");
		DAYS_FULL_ARRAY_LIST.add("nwed");
		DAYS_FULL_ARRAY_LIST.add("nthu");
		DAYS_FULL_ARRAY_LIST.add("nfri");
		DAYS_FULL_ARRAY_LIST.add("nsat");
		DAYS_FULL_ARRAY_LIST.add("nsun");
		DAYS_FULL_ARRAY_LIST.add("nmonday");
		DAYS_FULL_ARRAY_LIST.add("ntuesday");
		DAYS_FULL_ARRAY_LIST.add("nwednesday");
		DAYS_FULL_ARRAY_LIST.add("nthursday");
		DAYS_FULL_ARRAY_LIST.add("nfriday");
		DAYS_FULL_ARRAY_LIST.add("nsaturday");
		DAYS_FULL_ARRAY_LIST.add("nsunday");
	}

}
```
###### backend\DeleteParser.java
``` java
 */

package backend;

import java.util.ArrayList;
import java.util.Hashtable;

import struct.Command;

public class DeleteParser {
	
	private static final String MESSAGE_ERROR_DELETE = "Index/alias command required.";
	private static final String MESSAGE_ERROR_DELETE_INDEX_ALIAS = "Invalid index or alias.";
	private static final String MESSAGE_ERROR_DELETE_ALIAS = "Alias %1$s has not been set.";

	private Hashtable<String, String> commandAliases = new Hashtable<String, String>();

	public DeleteParser(Hashtable<String, String> commandAliases) {
		assert(commandAliases != null);
		this.commandAliases = commandAliases;
	}
	
	protected Command parse(ArrayList<String> arguments) {
		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the checks in verification method
		String verificationMsg = verifyDelete(arguments);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}
		String argument = arguments.get(CommandParser.POSITION_FIRST_INDEX);
		
		// Delete command can be used to delete both index and alias
		if (argument.matches(CommandParser.REGEX_POSITIVE_INTEGER)) {
			return deleteIndex(Integer.parseInt(argument));
		} else {
			return deleteAlias(argument);
		}
	}

	private String verifyDelete(ArrayList<String> arguments) {
		if (arguments.isEmpty()) {
			return MESSAGE_ERROR_DELETE;
		}
		if (arguments.size() > 1) {
			return MESSAGE_ERROR_DELETE_INDEX_ALIAS;
		}
		return CommandParser.STRING_VERIFIED;
	}

	private Command deleteAlias(String alias) {
		if (!commandAliases.containsKey(alias)) {
			return CommandParser.initInvalidCommand(String.format(MESSAGE_ERROR_DELETE_ALIAS, alias));
		} else {
			String originalCommand = commandAliases.get(alias);
			Command command = new Command(Command.CommandType.DELETEALIAS);
			command.setName(alias);
			command.setOriginalCommand(originalCommand);
			return command;
		}
	}

	private Command deleteIndex(int index) {
		Command command = new Command(Command.CommandType.DELETE);
		command.setIndex(index);
		return command;
	}

}
```
###### backend\EditParser.java
``` java
 */

package backend;

import backend.DateParser;
import backend.TimeParser;
import backend.NameParser;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Hashtable;
import java.util.List;

import struct.Command;
import struct.Date;

public class EditParser {
	
	private static final int POSITION_PLUS_ONE = 1;
	
	private static final int OFFSET = 1;
	
	private static final int NUMBER_REPEATED_EDIT_KEYWORD = -2;
	private static final int NUMBER_NO_EDIT_KEYWORD = -1;

	private static final String KEYWORD_EDIT_NAME = "name";
	private static final String KEYWORD_EDIT_DEADLINE = "date";
	private static final String KEYWORD_EDIT_START_DATE = "startd";
	private static final String KEYWORD_EDIT_START_TIME = "startt";
	private static final String KEYWORD_EDIT_END_DATE = "endd";
	private static final String KEYWORD_EDIT_END_TIME = "endt";

	private static final String MESSAGE_ERROR_NAME = "New task/event name required.";
	private static final String MESSAGE_ERROR_DEADLINE = "Invalid deadline.";
	private static final String MESSAGE_ERROR_START_DATE = "Invalid start date.";
	private static final String MESSAGE_ERROR_START_TIME = "Invalid start time.";
	private static final String MESSAGE_ERROR_END_DATE = "Invalid end date.";
	private static final String MESSAGE_ERROR_END_TIME = "Invalid end time.";
	private static final String MESSAGE_ERROR_EDIT = "Index required.";
	private static final String MESSAGE_ERROR_INDEX = "Invalid index.";
	private static final String MESSAGE_ERROR_DOUBLE_EDIT_KEYWORD = "Keyword %1$s has been entered twice.";
	private static final String MESSAGE_ERROR_EDIT_FORMAT = "Invalid edit format.";

	private static final DateParser dateParser = new DateParser();
	private static final TimeParser timeParser = new TimeParser();
	private static final NameParser nameParser = new NameParser();
	
	/**
	 * This method parses edit commands by first getting the indexes of all KEYWORDs
	 * that are used by the command. We then create a sorted ArrayList of the indexes 
	 * (indexArrayList), as well as a Hashtable of these indexes as keys, with the 
	 * corresponding keywords as values (indexKeywordHash). With these two objects, 
	 * we can construct the edit command by calling the setEditFields method.
	 * 
	 * @param arguments
	 * @return command
	 */
	protected Command parse(ArrayList<String> arguments) {

		ArrayList<String> argumentsLowerCase = CommandParser.toLowerCase(arguments);
		int nameIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_NAME);
		int deadlineIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_DEADLINE);
		int startDateIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_START_DATE);
		int startTimeIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_START_TIME);
		int endDateIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_END_DATE);
		int endTimeIndex = getKeywordIndex(argumentsLowerCase, KEYWORD_EDIT_END_TIME);

		// repeatedKeyword String will be null if no keywords are repeated, or the keyword
		// that is repeated
		String repeatedKeyword = repeatedKeywords(nameIndex, deadlineIndex, startDateIndex, 
				                                  startTimeIndex, endDateIndex, endTimeIndex);
		ArrayList<Integer> indexArrayList = getIndexArrayList(nameIndex, deadlineIndex, 
		        startDateIndex, startTimeIndex, endDateIndex, endTimeIndex);
		
		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the checks in verification method
		String verificationMsg = verifyEdit(arguments, deadlineIndex, startDateIndex, 
		        startTimeIndex, endDateIndex, endTimeIndex, repeatedKeyword, indexArrayList);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}
		
		int index = Integer.parseInt(arguments.get(CommandParser.POSITION_FIRST_INDEX));
		Hashtable<Integer, String> indexKeywordHash = getHashtable(nameIndex, deadlineIndex, 
		        startDateIndex, startTimeIndex, endDateIndex, endTimeIndex);
		
		// editList is a list of keywords that the user has specified in the user input.
		// Given to logic for easier execution of edit command.
		ArrayList<String> editList = getEditList(nameIndex, deadlineIndex, startDateIndex, 
				                                 startTimeIndex, endDateIndex, endTimeIndex);

		Command command = new Command();
		command.setCommandType(Command.CommandType.EDIT);
		command.setEditList(editList);
		command.setIndex(index);
		command = setEditFields(arguments, indexArrayList, indexKeywordHash, command);
		return command;
	}
	
	private int getKeywordIndex(ArrayList<String> arguments, String keyword) {
		if (arguments.contains(keyword)) {
			int keywordIndex = arguments.indexOf(keyword);
			List<String> subList = arguments.subList(keywordIndex + POSITION_PLUS_ONE, arguments.size());
			if (subList.contains(keyword)) {
				return NUMBER_REPEATED_EDIT_KEYWORD;
			}
			return keywordIndex;
		}
		return NUMBER_NO_EDIT_KEYWORD;
	}

	private String repeatedKeywords(int nameIndex, int deadlineIndex, int startDateIndex, 
			int startTimeIndex, int endDateIndex, int endTimeIndex) {
		if (nameIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_NAME;
		}
		if (deadlineIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_DEADLINE;
		}
		if (startDateIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_START_DATE;
		}
		if (startTimeIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_START_TIME;
		}
		if (endDateIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_END_DATE;
		}
		if (endTimeIndex == NUMBER_REPEATED_EDIT_KEYWORD) {
			return KEYWORD_EDIT_END_TIME;
		}
		return null;
	}
	
	private String verifyEdit(ArrayList<String> arguments, int deadlineIndex, int startDateIndex, 
	        int startTimeIndex, int endDateIndex, int endTimeIndex, String repeatedKeyword, 
	        ArrayList<Integer> indexArrayList) {
		if (arguments.isEmpty()) {
			return MESSAGE_ERROR_EDIT;
		}
		String indexString = arguments.get(CommandParser.POSITION_FIRST_INDEX);
		if (!indexString.matches(CommandParser.REGEX_POSITIVE_INTEGER)) {
			return MESSAGE_ERROR_INDEX;
		}
		if (repeatedKeyword != null) {
			return String.format(MESSAGE_ERROR_DOUBLE_EDIT_KEYWORD, repeatedKeyword);
		}
		if (!(deadlineIndex < 0)) {
			if (!(startDateIndex < 0) || !(startTimeIndex < 0) 
				  || !(endDateIndex < 0) || !(endTimeIndex < 0)) {
				return MESSAGE_ERROR_EDIT_FORMAT;
			}
		}
		if (indexArrayList.isEmpty()) {
			return MESSAGE_ERROR_EDIT_FORMAT;
		}
		return CommandParser.STRING_VERIFIED;
	}

	private ArrayList<Integer> getIndexArrayList(int nameIndex, int deadlineIndex, int startDateIndex,
			int startTimeIndex, int endDateIndex, int endTimeIndex) {
		ArrayList<Integer> indexArrayList = new ArrayList<Integer>();
		if (nameIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(nameIndex);
		}
		if (deadlineIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(deadlineIndex);
		}
		if (startDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(startDateIndex);
		}
		if (startTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(startTimeIndex);
		}
		if (endDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(endDateIndex);
		}
		if (endTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexArrayList.add(endTimeIndex);
		}
		Collections.sort(indexArrayList);
		return indexArrayList;
	}

	private Hashtable<Integer, String> getHashtable(int nameIndex, int deadlineIndex, int startDateIndex,
			int startTimeIndex, int endDateIndex, int endTimeIndex) {
		Hashtable<Integer, String> indexKeywordHash = new Hashtable<Integer, String>();
		if (nameIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(nameIndex, KEYWORD_EDIT_NAME);
		}
		if (deadlineIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(deadlineIndex, KEYWORD_EDIT_DEADLINE);
		}
		if (startDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(startDateIndex, KEYWORD_EDIT_START_DATE);
		}
		if (startTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(startTimeIndex, KEYWORD_EDIT_START_TIME);
		}
		if (endDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(endDateIndex, KEYWORD_EDIT_END_DATE);
		}
		if (endTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			indexKeywordHash.put(endTimeIndex, KEYWORD_EDIT_END_TIME);
		}
		return indexKeywordHash;
	}

	private ArrayList<String> getEditList(int nameIndex, int deadlineIndex, int startDateIndex, 
			int startTimeIndex, int endDateIndex, int endTimeIndex) {
		ArrayList<String> editList = new ArrayList<String>();
		if (nameIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_NAME);
		}
		if (deadlineIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_DEADLINE);
		}
		if (startDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_START_DATE);
		}
		if (startTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_START_TIME);
		}
		if (endDateIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_END_DATE);
		}
		if (endTimeIndex != NUMBER_NO_EDIT_KEYWORD) {
			editList.add(KEYWORD_EDIT_END_TIME);
		}
		return editList;
	}

	/**
	 * This method sets the different edit fields appropriately. By considering the indexes of
	 * keywords in ascending order, we can set the fields one by one by getting the full string
	 * of the current keyword index to the next keyword index as the current keyword's new
	 * argument. By using the current keyword index as the key to the Hashtable, we will
	 * be able to know what the keyword is and call the appropriate edit method.
	 * 
	 * @param arguments
	 * @param indexArrayList 
	 *             ArrayList of keyword indexes
	 * @param indexKeywordHash 
	 *             Hashtable of indexes as keys and corresponding keywords as values
	 * @param command
	 * @return command
	 */
	private Command setEditFields(ArrayList<String> arguments, ArrayList<Integer> indexArrayList,
			Hashtable<Integer, String> indexKeywordHash, Command command) {
		for (int i = 0; i < indexArrayList.size(); i++) {
			int keywordIndex = indexArrayList.get(i);
			int nextKeywordIndex;
			// If i is the last keywordIndex, we set the nextKeywordIndex as the argument size
			if (i == indexArrayList.size() - OFFSET) {
				nextKeywordIndex = arguments.size();
			} else {
				nextKeywordIndex = indexArrayList.get(i + POSITION_PLUS_ONE);
			}
			String keyword = indexKeywordHash.get(keywordIndex);
			String argument = nameParser.getName(arguments, keywordIndex + POSITION_PLUS_ONE, nextKeywordIndex);
			String argumentLowerCase = argument;
			if (argument != null) {
				argumentLowerCase = argument.toLowerCase();
			}

			switch (keyword) {

			 	case KEYWORD_EDIT_NAME :
			 		command = editName(command, argument);
			 		break;

	            case KEYWORD_EDIT_DEADLINE :
	                command = editDeadline(command, argumentLowerCase);
	                break;
	                
	            case KEYWORD_EDIT_START_DATE :
	            	command = editStartDate(command, argumentLowerCase);
	            	break;
	            
	            case KEYWORD_EDIT_START_TIME :
	            	command = editStartTime(command, argumentLowerCase);
	            	break;
	            	
	            case KEYWORD_EDIT_END_DATE :
	            	command = editEndDate(command, argumentLowerCase);
	            	break;
	            	
	            case KEYWORD_EDIT_END_TIME :
	            	command = editEndTime(command, argumentLowerCase);
	            	break;
			}
			// We terminate the for loop when we get back an Invalid Command
			if (command.getCommandType() == Command.CommandType.INVALID) {
				i = indexArrayList.size();
			}
		}
		return command;
	}

	private Command editName(Command command, String argument) {
		if (argument == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_NAME);
		}
		command.setName(argument);
		return command;
	}

	private Command editDeadline(Command command, String argument) {
		Date deadline = dateParser.getDate(argument);
		if (deadline == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_DEADLINE);
		}
		command.setDueDate(deadline);
		return command;
	}

	private Command editStartDate(Command command, String argument) {
		Date startDate = dateParser.getDate(argument);
		if (startDate == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_START_DATE);
		}
		command.setStartDate(startDate);
		return command;
	}

	private Command editStartTime(Command command, String argument) {
		String startTime = timeParser.getTime(argument);
		if (startTime == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_START_TIME);
		}
		command.setStartTime(startTime);
		return command;
	}

	private Command editEndDate(Command command, String argument) {
		Date endDate = dateParser.getDate(argument);
		if (endDate == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_END_DATE);
		}
		command.setEndDate(endDate);
		return command;
	}

	private Command editEndTime(Command command, String argument) {
		String endTime = timeParser.getTime(argument);
		if (endTime == null) {
			return CommandParser.initInvalidCommand(MESSAGE_ERROR_END_TIME);
		}
		command.setEndTime(endTime);
		return command;
	}
}
```
###### backend\NameParser.java
``` java
 */

package backend;

import java.util.ArrayList;
import java.util.List;

public class NameParser {
	
	private static final int POSITION_SECOND_INDEX = 1;

	private static final String STRING_ONE_SPACE = " ";
	private static final String ESCAPE_CHARACTER = "\\";
	
	protected String getName(ArrayList<String> arguments, int startIndex, int endIndex) {
		List<String> nameList = arguments.subList(startIndex, endIndex);
		return getName(nameList);
	}
	
	protected String getEventName(ArrayList<String> arguments, int keywordToIndex, int keywordFromIndex) {
		String name = null;
		if (keywordToIndex > keywordFromIndex) {
			name = getName(arguments, CommandParser.POSITION_FIRST_INDEX, keywordFromIndex);
		} else {
			name = getName(arguments, CommandParser.POSITION_FIRST_INDEX, keywordToIndex);
		}
		return name;
	}
	
	private String getName(List<String> arguments) {
		String name = "";
		if (arguments.isEmpty()) {
			return null;
		}
		for (int i = 0; i < arguments.size(); i++) {
			String currArgument = arguments.get(i);
			// getName method will remove any ESCAPE_CHARACTERS in each String
			if (currArgument.startsWith(ESCAPE_CHARACTER)) {
				currArgument = currArgument.substring(POSITION_SECOND_INDEX);
			}
			name += currArgument + STRING_ONE_SPACE;
		}
		return name.trim();
	}

}
```
###### backend\SetParser.java
``` java
 */

package backend;

import java.util.ArrayList;

import struct.Command;

public class SetParser {
	
	private static final int POSITION_THIRD_INDEX = 2;
	
	private static final String KEYWORD_SET = "as";

	private static final String MESSAGE_ERROR_SET_COMMAND = "%1$s is not a registered command.";
	private static final String MESSAGE_ERROR_SET_ALIAS = "Input alias is a either a registered command and cannot be used or an alias-in-use.";
	private static final String MESSAGE_ERROR_SET_NUMBER = "Positive integers cannot be used as aliases.";
	private static final String MESSAGE_ERROR_SET = "Command and alias required.";
	private static final String MESSAGE_ERROR_SET_FORMAT = "Invalid set format.";
	private static final String MESSAGE_ERROR_SET_AS = "Keyword as cannot be used as alias.";

	private static final ArrayList<String> COMMANDS_ARRAY_LIST = new ArrayList<String>();

	public SetParser() {
		initCommandsArrayList();
	}
	
	protected Command parse(ArrayList<String> arguments) {
		// String verificationMsg will only be STRING_VERIFIED if it passes
		// the checks in verification method
		String verificationMsg = verifySet(arguments);
		if (!verificationMsg.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(verificationMsg);
		}
		
		String commandKeyword = arguments.get(POSITION_THIRD_INDEX);
		String alias = arguments.get(CommandParser.POSITION_FIRST_INDEX);
		String commandKeywordVerified = verifyCommandKeyword(commandKeyword);
		String aliasVerified = verifyAlias(alias);
		
		// String commandKeywordVerified will only be STRING_VERIFIED if commandKeyword
		// is a alias for or is a registered command in COMMANDS_ARRAY_LIST
		if (!commandKeywordVerified.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(commandKeywordVerified);
		}
		
		// String aliasVerified will only be STRING_VERIFIED if alias is valid.
		// This means it cannot be a registered alias or command,
		// KEYWORD_SET_AS, or positive integer.
		if (!aliasVerified.equals(CommandParser.STRING_VERIFIED)) {
			return CommandParser.initInvalidCommand(aliasVerified);
		}

		Command command = new Command(Command.CommandType.SET);
		command.setName(alias);
		command.setOriginalCommand(commandKeyword);
		return command;
	}

	private String verifySet(ArrayList<String> arguments) {
		if (arguments.isEmpty()) {
			return MESSAGE_ERROR_SET;
		}
		if (arguments.size() != 3 || !arguments.get(1).equals(KEYWORD_SET)) {
			return MESSAGE_ERROR_SET_FORMAT;
		}
		return CommandParser.STRING_VERIFIED;
	}

	private String verifyCommandKeyword(String commandKeyword) {
		if (COMMANDS_ARRAY_LIST.contains(commandKeyword)) {
			return CommandParser.STRING_VERIFIED;
		} else {
			return String.format(MESSAGE_ERROR_SET_COMMAND, commandKeyword);
		}
	}

	private String verifyAlias(String alias) {
		if (COMMANDS_ARRAY_LIST.contains(alias)) {
			return MESSAGE_ERROR_SET_ALIAS;
		} else if (KEYWORD_SET.equals(alias)) {
			return MESSAGE_ERROR_SET_AS;
		} else if (alias.matches(CommandParser.REGEX_POSITIVE_INTEGER)) {
			return MESSAGE_ERROR_SET_NUMBER;
		} else {
			return CommandParser.STRING_VERIFIED;
		}
	}

	private void initCommandsArrayList() {
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_ADD);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_DELETE);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_EDIT);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_SEARCH);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_DONE);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_SET);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_SAVE);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_UNDO);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_REDO);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_ALL);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_DEF);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_HIST);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_UNRES);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_HELP);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_OPEN_FILE);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_VIEW_CONFIG);
		COMMANDS_ARRAY_LIST.add(CommandParser.USER_COMMAND_EXIT);
	}
}
```
###### backend\TimeParser.java
``` java
 */

package backend;

public class TimeParser {
	
	private static final int POSITION_DIFFERENCE_TWO = 2;

	private static final String REGEX_TWELVE_HOUR_SIMPLE_TIME = "(1[012]|[1-9]|0[1-9])(\\s)?(?i)(am|pm)";
	private static final String REGEX_TWELVE_HOUR_TIME = "(1[012]|[1-9]|0[1-9])(:|.)?" + 
	                                                     "[0-5][0-9](\\s)?(?i)(am|pm)";
	private static final String REGEX_TWENTY_FOUR_HOUR_SIMPLE_TIME = "([01]?[0-9]|2[0-3])";
	private static final String REGEX_TWENTY_FOUR_HOUR_TIME = "([01]?[0-9]|2[0-3])(:|.)?[0-5][0-9]";

	private static final String STRING_ONE_DOT = ".";
	private static final String STRING_ONE_COLON = ":";
	private static final String STRING_EMPTY = "";

	private static final String TIME_AM = "am";
	private static final String TIME_PM = "pm";
	private static final String TIME_MIDNIGHT = "0000";
	private static final String TIME_ZERO_HOUR = "00";
	private static final String TIME_ZERO_MINUTE = "00";
	private static final String TIME_ZERO = "0";
	private static final int TIME_HOUR_TWELVE = 12;
	private static final int TIME_MAXIMUM = 2400;
	private static final int TIME_ADD_TWELVE = 12;
	private static final int TIME_LENGTH_ONE = 1;
	private static final int TIME_LENGTH_TWO = 2;
	private static final int TIME_LENGTH_THREE = 3;

	/**
	 * Depending on which REGEX the time String matches to, we will
	 * call the appropriate method to do the appropriate removal of 
	 * STRING_ONE_DOT and STRING_ONE_COLON, followed by the appropriate
	 * padding of zeroes and accounting for the time period (am/pm) as
	 * well as the special cases
	 * 
	 * @param time
	 * @return String
	 */
	protected String getTime(String time) {
		if (time.matches(REGEX_TWELVE_HOUR_SIMPLE_TIME)) {
			return getTwelveHourSimpleTime(time);
		} else if (time.matches(REGEX_TWELVE_HOUR_TIME)) {
			return getTwelveHourTime(time);
		} else if (time.matches(REGEX_TWENTY_FOUR_HOUR_SIMPLE_TIME)) {
			return getTwentyFourHourSimpleTime(time);
		} else if (time.matches(REGEX_TWENTY_FOUR_HOUR_TIME)) {
			return getTwentyFourHourTime(time);
		} else {
			return null;
		}
	}

	// To check if endTime is larger than startTime
	protected boolean areValidTimes(String startTime, String endTime) {
		int intStartTime = Integer.parseInt(startTime);
		int intEndTime = Integer.parseInt(endTime);
		if (intEndTime > intStartTime) {
			return true;
		} else {
			return false;
		}
	}

	private String getTwelveHourSimpleTime(String time) {
		String period = time.substring(time.length() - POSITION_DIFFERENCE_TWO).toLowerCase();
		String hourString = time.substring(CommandParser.POSITION_FIRST_INDEX, 
				                           time.length() - POSITION_DIFFERENCE_TWO).trim();
		int hourInt = Integer.parseInt(hourString);
		
		if (period.equals(TIME_PM) && hourInt != TIME_HOUR_TWELVE) {
			hourInt += TIME_ADD_TWELVE;
		}
		
		hourString = Integer.toString(hourInt);
		if (period.equals(TIME_AM) && hourInt == TIME_HOUR_TWELVE) {
			time = TIME_MIDNIGHT;
		} else if (hourString.length() == TIME_LENGTH_ONE) {
			time = TIME_ZERO + hourString + TIME_ZERO_MINUTE;
		} else {
			time = hourString + TIME_ZERO_MINUTE;
		}
		return time;
	}
	
	private String getTwelveHourTime(String time) {
		String period = time.substring(time.length() - POSITION_DIFFERENCE_TWO).toLowerCase();
		time = time.substring(CommandParser.POSITION_FIRST_INDEX, 
				              time.length() - POSITION_DIFFERENCE_TWO).trim();
		time = time.replace(STRING_ONE_DOT, STRING_EMPTY);
		time = time.replace(STRING_ONE_COLON, STRING_EMPTY);
		String minuteString = time.substring(time.length() - POSITION_DIFFERENCE_TWO);
		String hourString = time.substring(CommandParser.POSITION_FIRST_INDEX, 
				                           time.length() - POSITION_DIFFERENCE_TWO);
		
		int hourInt = Integer.parseInt(hourString);
		if (period.equals(TIME_PM) && hourInt != TIME_HOUR_TWELVE) {
			hourInt += TIME_ADD_TWELVE;
		}
		if (period.equals(TIME_AM) && hourInt == TIME_HOUR_TWELVE) {
			return TIME_ZERO_HOUR + minuteString;
		}
		
		hourString = Integer.toString(hourInt);
		if (hourString.length() == TIME_LENGTH_ONE) {
			time = TIME_ZERO + hourString + minuteString;
		} else {
			time = hourString + minuteString;
		}
		if (Integer.parseInt(time) < TIME_MAXIMUM) {
			return time;
		} else {
			return null;
		}
	}
	
	private String getTwentyFourHourSimpleTime(String time) {
		if (time.length() == TIME_LENGTH_ONE) {
			time = TIME_ZERO + time + TIME_ZERO_MINUTE;
		} else if (time.length() == TIME_LENGTH_TWO) {
			time = time + TIME_ZERO_MINUTE;
		}
		return time;
	}
	
	private String getTwentyFourHourTime(String time) {
		time = time.replace(STRING_ONE_DOT, STRING_EMPTY);
		time = time.replace(STRING_ONE_COLON, STRING_EMPTY);
		
		if (time.length() == TIME_LENGTH_THREE) {
			time = TIME_ZERO + time;
		}
		if (Integer.parseInt(time) < TIME_MAXIMUM) {
			return time;
		} else {
			return null;
		}
	}

}
```
###### gui\LogicController.java
``` java
	 */
	/**
	 * This method gets the list of added Aliases by calling Logic's getAliasFileContents()
	 * method, and then converting the returned Strings into the Alias type and storing them
	 * in an array
	 * 
	 * @return An Alias[] of aliases read from alias.txt
	 */
	protected ArrayList<Alias> getAliases() {
		ArrayList<Alias> newAliases = new ArrayList<Alias>();
		
		try {
			String aliases = logic.getAliasFileContents();
			// Check if the there are any aliases set in the file yet
			if (!aliases.equals(NULL_STRING)) {
				String[] aliasesSplit = aliases.split(NEWLINE);
				for (int i = 0; i < aliasesSplit.length; i++) {
					String[] aliasSplit = aliasesSplit[i].split(";");
					newAliases.add(new Alias(aliasSplit[0], aliasSplit[1]));
				}
			}
		} catch (FileSystemException e) {
			// Do nothing, return an empty alias list to AutoComplete
			MainApp.logger.log(Level.SEVERE, MainApp.LOG_ALIAS_NOT_FOUND);
		}
		
		return newAliases;
	}
	
	/**
```
###### gui\LogicController.java
``` java
     */
    
    /**
     * This method opens the text file currently set by the application for writing.
     * This text file is opened in the user's default associated application
     */
    protected void openFileLocation() {
		try {
			HistoryViewController.updateHistView(MESSAGE_OPEN_FILE);
			InterfaceController.getFeedbackLabel().setText(MESSAGE_OPEN_FILE);
			Desktop.getDesktop().open(
					new File(InterfaceController.getLogic().getFilePath()));
		} catch (IOException e) {
			MainApp.logger.log(Level.SEVERE, MainApp.LOG_FILE_NOT_FOUND);
		}
    }
    
    /**
     * This method opens the configuration file currently used by the application
     * for storing settings.
     * This text file is opened in the user's default associated application
     */
    protected void openConfigLocation() {
    	try {
    		HistoryViewController.updateHistView(MESSAGE_OPEN_CONFIG);
    		InterfaceController.getFeedbackLabel().setText(MESSAGE_OPEN_CONFIG);
    		Desktop.getDesktop().open(new File(PATH_CONFIG_FILE));
    	} catch (IOException e) {
    		MainApp.logger.log(Level.SEVERE, MainApp.LOG_CONFIG_NOT_FOUND);
    	}
    }
    
    /**
```
###### test\CommandParserTest.java
``` java
public class CommandParserTest {

	private Hashtable<String, String> commandAliases = new Hashtable<String, String>();
	private CommandParser parser = new CommandParser(commandAliases);
	private Date todayDate = Date.todayDate();
	private String todayDateString = todayDate.formatDateShort();
	private String todayDayString = todayDate.getDayString().toLowerCase();
	private Date tmrDate = Date.tomorrowDate();
	private String tmrDateString = tmrDate.formatDateShort();
	private static final ArrayList<String> DAYS_ARRAY_LIST = new ArrayList<String>();

	private void initDaysArrayList() {
		DAYS_ARRAY_LIST.add("mon");
		DAYS_ARRAY_LIST.add("tue");
		DAYS_ARRAY_LIST.add("wed");
		DAYS_ARRAY_LIST.add("thu");
		DAYS_ARRAY_LIST.add("fri");
		DAYS_ARRAY_LIST.add("sat");
		DAYS_ARRAY_LIST.add("sun");
	}

	private Date getDate(String day) {
		initDaysArrayList();
		String daySubstring;
		boolean n = false;
		if (day.substring(0, 1).equals("n")) {
			n = true;
			daySubstring = day.substring(1, 4);
		} else {
			daySubstring = day.substring(0, 3);
		}
		int difference = DAYS_ARRAY_LIST.indexOf(daySubstring)
				- DAYS_ARRAY_LIST.indexOf(todayDayString.substring(0, 3));
		if (difference < 0) {
			difference += 7;
		}
		if (n) {
			difference += 7;
		}
		return todayDate.plusDay(difference);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR ADD COMMAND
	// *******************************************************************
	// *******************************************************************

	// Floating task
	@Test
	public void testAddFloatingTask() {
		String userInput = "add something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		assertEquals("something", name);
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.FLOATING_TASK, dataType);
	}

	@Test
	public void testAddFloatingTaskWithEscapeChar() {
		String userInput = "add something \\by today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		assertEquals("something by today", name);
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.FLOATING_TASK, dataType);
	}

	@Test
	public void testInvalidAddEmpty() {
		String userInput = "add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Task name required.", errorMsg);
	}

	// Tasks with deadline
	@Test
	public void testAddTask() {
		String userInput = "add something by 3112";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date dueDate = command.getDueDate();
		String dueDateString = dueDate.formatDateShort();
		Date date = new Date("311215");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.TASK, dataType);
		assertEquals("something", name);
		assertEquals(dateString, dueDateString);
	}

	@Test
	public void testInvalidAddTaskDate() {
		String userInput = "add something by 3212";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid deadline.", errorMsg);
	}

	@Test
	public void testInvalidAddTaskName() {
		String userInput = "add by 3112";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Task name required.", errorMsg);
	}

	// Single day events
	@Test
	public void testAddSingleDayEvent() {
		String userInput = "add event on today from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddSingleDayEventJumbled1() {
		String userInput = "add event on today to 3pm from 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddSingleDayEventJumbled2() {
		String userInput = "add event from 2pm on today to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddSingleDayEventJumbled3() {
		String userInput = "add event from 2pm to 3pm on today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddSingleDayEventJumbled4() {
		String userInput = "add event to 3pm from 2pm on today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddSingleDayEventJumbled5() {
		String userInput = "add event to 3pm on today from 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testInvalidAddSingleDayEventFormat1() {
		String userInput = "add event on today from today 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid format for adding event.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventFormat2() {
		String userInput = "add event on today from 2pm to 3pm tmr";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid format for adding event.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventEmpty() {
		String userInput = "add on today from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Event name required.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventDate() {
		String userInput = "add event on todayy from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventStartTime() {
		String userInput = "add event on today from 2401 to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start time.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventEndTime() {
		String userInput = "add event on today from 2pm to 2401";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid end time.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventTimes1() {
		String userInput = "add event on today from 3pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Start time later than or equal to end time for single-day event.", errorMsg);
	}

	@Test
	public void testInvalidAddSingleDayEventTimes2() {
		String userInput = "add event on today from 3pm to 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Start time later than or equal to end time for single-day event.", errorMsg);
	}

	// Multi-days event
	@Test
	public void testAddEvent() {
		String userInput = "add event from sun 2pm to sun 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("sun");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testAddEventJumbled() {
		String userInput = "add event to tomorrow 3pm from today 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(tmrDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testInvalidAddEventFormat1() {
		String userInput = "add event from sun 2 pm to sun 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid format for adding event.", errorMsg);
	}

	@Test
	public void testInvalidAddEventFormat2() {
		String userInput = "add event from sun 2pm to sun 3 pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid format for adding event.", errorMsg);
	}

	@Test
	public void testInvalidAddEventStartDate() {
		String userInput = "add event from sund 2pm to sun 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidAddEventStartTime() {
		String userInput = "add event from sun 12345 to sun 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start time.", errorMsg);
	}

	@Test
	public void testInvalidAddEventEndDate() {
		String userInput = "add event from sun 2pm to sund 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid end date.", errorMsg);
	}

	@Test
	public void testInvalidAddEventEndTime() {
		String userInput = "add event from sun 2pm to sun 12345";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid end time.", errorMsg);
	}

	@Test
	public void testInvalidAddEventTimes() {
		String userInput = "add event from sun 3pm to sun 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Start time later than or equal to end time for single-day event.", errorMsg);
	}

	@Test
	public void testInvalidAddEventDates() {
		String userInput = "add event from tomorrow 2pm to today 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Start date later than end date.", errorMsg);
	}

	@Test
	public void testInvalidAddEventEmpty() {
		String userInput = "add from sun 2pm to sun 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Event name required.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR DATE FORMATS
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testDateTomorrow1() {
		String userInput = "add event on tomorrow from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(tmrDateString, endDateString);
		assertEquals(tmrDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateTomorrow2() {
		String userInput = "add event on tmr from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(tmrDateString, endDateString);
		assertEquals(tmrDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateTomorrow3() {
		String userInput = "add event on tomo from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(tmrDateString, endDateString);
		assertEquals(tmrDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateMondayShort() {
		String userInput = "add event on mon from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("mon");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateMondayLong() {
		String userInput = "add event on monday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("monday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateTuesdayShort() {
		String userInput = "add event on tue from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("tue");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateTuesdayLong() {
		String userInput = "add event on tuesday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("tuesday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateWednesdayShort() {
		String userInput = "add event on wed from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("wed");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateWednesdayLong() {
		String userInput = "add event on wednesday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("wednesday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateThursdayShort() {
		String userInput = "add event on thu from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("thu");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateThursdayLong() {
		String userInput = "add event on thursday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("thursday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateFridayShort() {
		String userInput = "add event on fri from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("fri");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateFridayLong() {
		String userInput = "add event on friday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("friday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateSaturdayShort() {
		String userInput = "add event on sat from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("sat");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateSaturdayLong() {
		String userInput = "add event on saturday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("saturday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateSundayShort() {
		String userInput = "add event on sun from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("sun");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateSundayLong() {
		String userInput = "add event on sunday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("sunday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextMondayShort() {
		String userInput = "add event on nmon from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nmon");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextMondayLong() {
		String userInput = "add event on nmonday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nmonday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextTuesdayShort() {
		String userInput = "add event on ntue from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("ntue");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextTuesdayLong() {
		String userInput = "add event on ntuesday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("ntuesday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextWednesdayShort() {
		String userInput = "add event on nwed from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nwed");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextWednesdayLong() {
		String userInput = "add event on nwednesday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nwednesday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextThursdayShort() {
		String userInput = "add event on nthu from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nthu");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextThursdayLong() {
		String userInput = "add event on nthursday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nthursday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextFridayShort() {
		String userInput = "add event on nfri from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nfri");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextFridayLong() {
		String userInput = "add event on nfriday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nfriday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextSaturdayShort() {
		String userInput = "add event on nsat from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nsat");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextSaturdayLong() {
		String userInput = "add event on nsaturday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nsaturday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextSundayShort() {
		String userInput = "add event on nsun from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nsun");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateNextSundayLong() {
		String userInput = "add event on nsunday from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = getDate("nsunday");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateFutureShort() {
		String userInput = "add event on 3112 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = new Date("311215");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateFutureLong() {
		String userInput = "add event on 311215 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = new Date("311215");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testDateLeapYear() {
		String userInput = "add event on 290216 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		Date date = new Date("290216");
		String dateString = date.formatDateShort();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(dateString, endDateString);
		assertEquals(dateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
	}

	@Test
	public void testInvalidDatePastShort() {
		String userInput = "add event on 1210 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidDatePastLong() {
		String userInput = "add event on 121015 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidDatePastLeapYear() {
		String userInput = "add event on 290200 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidDateMonth() {
		String userInput = "add event on 121315 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidDateDay() {
		String userInput = "add event on 321215 from 2pm to 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR TIME FORMATS
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testTime1() {
		String userInput = "add event on today from 1am to 2am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0100", startTime);
		assertEquals("0200", endTime);
	}

	@Test
	public void testTime2() {
		String userInput = "add event on today from 1pm to 2pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1300", startTime);
		assertEquals("1400", endTime);
	}

	@Test
	public void testTime3() {
		String userInput = "add event on today from 10am to 11am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1000", startTime);
		assertEquals("1100", endTime);
	}

	@Test
	public void testTime4() {
		String userInput = "add event on today from 10pm to 11pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("2200", startTime);
		assertEquals("2300", endTime);
	}

	@Test
	public void testTime5() {
		String userInput = "add event on today from 10am to 12pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1000", startTime);
		assertEquals("1200", endTime);
	}

	@Test
	public void testTime6() {
		String userInput = "add event on today from 12am to 10am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0000", startTime);
		assertEquals("1000", endTime);
	}

	@Test
	public void testTime7() {
		String userInput = "add event on today from 1:30am to 2:30am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0130", startTime);
		assertEquals("0230", endTime);
	}

	@Test
	public void testTime8() {
		String userInput = "add event on today from 01:30am to 02:30am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0130", startTime);
		assertEquals("0230", endTime);
	}

	@Test
	public void testTime9() {
		String userInput = "add event on today from 1.30am to 2.30am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0130", startTime);
		assertEquals("0230", endTime);
	}

	@Test
	public void testTime10() {
		String userInput = "add event on today from 01.30am to 02.30am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0130", startTime);
		assertEquals("0230", endTime);
	}

	@Test
	public void testTime11() {
		String userInput = "add event on today from 130am to 0230am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0130", startTime);
		assertEquals("0230", endTime);
	}

	@Test
	public void testTime12() {
		String userInput = "add event on today from 2 to 23";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0200", startTime);
		assertEquals("2300", endTime);
	}

	@Test
	public void testTime13() {
		String userInput = "add event on today from 2:30 to 23.30";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0230", startTime);
		assertEquals("2330", endTime);
	}

	@Test
	public void testTime14() {
		String userInput = "add event on today from 12:00am to 11.00pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0000", startTime);
		assertEquals("2300", endTime);
	}

	@Test
	public void testTime15() {
		String userInput = "add event on today from 2:30 to 11.30am";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.DataType dataType = command.getDataType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.ADD, type);
		assertEquals(Command.DataType.EVENT, dataType);
		assertEquals("event", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("0230", startTime);
		assertEquals("1130", endTime);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR DELETE COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testDeleteIndex() {
		String userInput = "delete 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		int index = command.getIndex();
		assertEquals(Command.CommandType.DELETE, type);
		assertEquals(1, index);
	}

	@Test
	public void testInvalidDeleteEmpty() {
		String userInput = "delete";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Index/alias command required.", errorMsg);
	}

	@Test
	public void testInvalidDeleteArgument() {
		String userInput = "delete two words";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index or alias.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR EDIT COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testEditTask() {
		String userInput = "edit 1 name something date today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String name = command.getName();
		Date dueDate = command.getDueDate();
		String dueDateString = dueDate.formatDateShort();
		int index = command.getIndex();
		assertEquals(Command.CommandType.EDIT, type);
		assertEquals("something", name);
		assertEquals(todayDateString, dueDateString);
		assertEquals(1, index);
	}

	@Test
	public void testEditEvent() {
		String userInput = "edit 1 name something startd today startt 2pm endd today endt 3pm";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String name = command.getName();
		Date endDate = command.getEndDate();
		String endDateString = endDate.formatDateShort();
		Date startDate = command.getStartDate();
		String startDateString = startDate.formatDateShort();
		int index = command.getIndex();
		String startTime = command.getStartTime();
		String endTime = command.getEndTime();
		assertEquals(Command.CommandType.EDIT, type);
		assertEquals("something", name);
		assertEquals(todayDateString, endDateString);
		assertEquals(todayDateString, startDateString);
		assertEquals("1400", startTime);
		assertEquals("1500", endTime);
		assertEquals(1, index);
	}

	@Test
	public void testInvalidEditEmpty() {
		String userInput = "edit";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Index required.", errorMsg);
	}

	@Test
	public void testInvalidEditZeroIndex() {
		String userInput = "edit 0 name something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	@Test
	public void testInvalidEditNegativeIndex() {
		String userInput = "edit -1 name something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsName() {
		String userInput = "edit 1 name something name something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword name has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsDeadline() {
		String userInput = "edit 1 date 3112 date 3112";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword date has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsStartDate() {
		String userInput = "edit 1 startd today startd today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword startd has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsStartTime() {
		String userInput = "edit 1 startt 0000 startt 0000";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword startt has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsEndDate() {
		String userInput = "edit 1 endd today endd today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword endd has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditDoubleKeywordsEndTime() {
		String userInput = "edit 1 endt 0000 endt 0000";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword endt has been entered twice.", errorMsg);
	}

	@Test
	public void testInvalidEditFormat() {
		String userInput = "edit 1 name something date today startd today";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid edit format.", errorMsg);
	}

	@Test
	public void testInvalidEditEmptyField() {
		String userInput = "edit 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid edit format.", errorMsg);
	}

	@Test
	public void testInvalidEditName() {
		String userInput = "edit 1 name";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("New task/event name required.", errorMsg);
	}

	@Test
	public void testInvalidEditDeadline() {
		String userInput = "edit 1 date 0813";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid deadline.", errorMsg);
	}

	@Test
	public void testInvalidEditStartDate() {
		String userInput = "edit 1 startd 0813";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start date.", errorMsg);
	}

	@Test
	public void testInvalidEditStartTime() {
		String userInput = "edit 1 startt 12345";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid start time.", errorMsg);
	}

	@Test
	public void testInvalidEditEndDate() {
		String userInput = "edit 1 endd 0813";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid end date.", errorMsg);
	}

	@Test
	public void testInvalidEditEndTime() {
		String userInput = "edit 1 endt 12345";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid end time.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR SEARCH COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testSearchOneKeyword() {
		String userInput = "search something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String keyword = command.getName();
		assertEquals(Command.CommandType.SEARCH, type);
		assertEquals("something", keyword);
	}

	@Test
	public void testSearchTwoKeywords() {
		String userInput = "search two keywords";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String keywords = command.getName();
		assertEquals(Command.CommandType.SEARCH, type);
		assertEquals("two keywords", keywords);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR DONE COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testDone() {
		String userInput = "done 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		int index = command.getIndex();
		assertEquals(Command.CommandType.DONE, type);
		assertEquals(1, index);
	}

	@Test
	public void testInvalidDoneString() {
		String userInput = "done something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	@Test
	public void testInvalidDoneZeroIndex() {
		String userInput = "done 0";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	@Test
	public void testInvalidDoneNegativeIndex() {
		String userInput = "done -1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	@Test
	public void testInvalidDoneArgument() {
		String userInput = "done 1 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid index.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR SET COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testSet() {
		String userInput = "set create as add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String alias = command.getName();
		String originalCommand = command.getOriginalCommand();
		assertEquals(Command.CommandType.SET, type);
		assertEquals("create", alias);
		assertEquals("add", originalCommand);
	}

	@Test
	public void testInvalidSetEmpty() {
		String userInput = "set";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Command and alias required.", errorMsg);
	}

	@Test
	public void testInvalidSetCommandFormat() {
		String userInput = "set something as add task";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid set format.", errorMsg);
	}

	@Test
	public void testInvalidSetKeywordAsFormat() {
		String userInput = "set something for add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Invalid set format.", errorMsg);
	}

	@Test
	public void testInvalidSetAlias() {
		String userInput = "set add as add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Input alias is a either a registered command and cannot be used or an alias-in-use.", errorMsg);
	}
	
	@Test
	public void testInvalidSetAliasAs() {
		String userInput = "set as as add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Keyword as cannot be used as alias.", errorMsg);
	}

	@Test
	public void testInvalidSetPositiveIntegerAlias() {
		String userInput = "set 1 as add";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Positive integers cannot be used as aliases.", errorMsg);
	}

	@Test
	public void testInvalidSetCommand() {
		String userInput = "set create as include";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("include is not a registered command.", errorMsg);
	}

	@Test
	public void testSetAndDeleteAlias() {
		parser.setAlias("create", "set");
		String userInput = "delete create";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String name = command.getName();
		assertEquals(Command.CommandType.DELETEALIAS, type);
		assertEquals("create", name);
		String userInput2 = "create include as create";
		Command command2 = parser.parse(userInput2);
		Command.CommandType type2 = command2.getCommandType();
		String alias = command2.getName();
		String originalCommand = command2.getOriginalCommand();
		assertEquals(Command.CommandType.SET, type2);
		assertEquals("include", alias);
		assertEquals("set", originalCommand);
		parser.deleteAlias("create");
		Command command3 = parser.parse(userInput);
		Command.CommandType type3 = command3.getCommandType();
		String errorMsg = command3.getName();
		assertEquals(Command.CommandType.INVALID, type3);
		assertEquals("Alias create has not been set.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR SAVE COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testSave() {
		String userInput = "save C:/Dropbox";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String directory = command.getName();
		assertEquals(Command.CommandType.SAVE, type);
		assertEquals("C:/Dropbox", directory);
	}

	// To test empty argument
	@Test
	public void testInvalidSave() {
		String userInput = "save";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("Directory required.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR UNDO COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testUndo() {
		String userInput = "undo";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		assertEquals(Command.CommandType.UNDO, type);
	}

	@Test
	public void testInvalidUndo() {
		String userInput = "undo 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR REDO COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testRedo() {
		String userInput = "redo";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		assertEquals(Command.CommandType.REDO, type);
	}

	@Test
	public void testInvalidRedo() {
		String userInput = "redo 1";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR VIEW COMMANDS
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testViewAll() {
		String userInput = "all";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.ALL, viewType);
	}

	@Test
	public void testInvalidViewAll() {
		String userInput = "all something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewDef() {
		String userInput = "def";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.DEF, viewType);
	}

	@Test
	public void testInvalidViewDef() {
		String userInput = "def something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewHist() {
		String userInput = "hist";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.HIST, viewType);
	}

	@Test
	public void testInvalidViewHist() {
		String userInput = "hist something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewUnres() {
		String userInput = "unres";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.UNRES, viewType);
	}

	@Test
	public void testInvalidViewUnres() {
		String userInput = "unres something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewSearch() {
		String userInput = "search";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.SEARCH, viewType);
	}

	@Test
	public void testViewHelp() {
		String userInput = "help";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.HELP, viewType);
	}

	@Test
	public void testInvalidViewHelp() {
		String userInput = "help something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewDone() {
		String userInput = "done";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.DONE, viewType);
	}

	@Test
	public void testViewOpenfile() {
		String userInput = "openfile";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.OPENFILE, viewType);
	}

	@Test
	public void testInvalidViewOpenfile() {
		String userInput = "openfile something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	@Test
	public void testViewConfig() {
		String userInput = "config";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		Command.ViewType viewType = command.getViewType();
		assertEquals(Command.CommandType.VIEW, type);
		assertEquals(Command.ViewType.CONFIG, viewType);
	}

	@Test
	public void testInvalidViewConfig() {
		String userInput = "config something";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR EXIT COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testExit() {
		String userInput = "exit";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		assertEquals(Command.CommandType.EXIT, type);
	}

	@Test
	public void testInvalidExit() {
		String userInput = "exit software";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String errorMsg = command.getName();
		assertEquals(Command.CommandType.INVALID, type);
		assertEquals("This command does not expect arguments.", errorMsg);
	}

	// *******************************************************************
	// *******************************************************************
	// FOR INVALID COMMAND
	// *******************************************************************
	// *******************************************************************

	@Test
	public void testInvalid() {
		String userInput = "random invalid command";
		Command command = parser.parse(userInput);
		Command.CommandType type = command.getCommandType();
		String input = command.getUserInput();
		assertEquals(userInput, input);
		assertEquals(Command.CommandType.INVALID, type);
	}

}
```
